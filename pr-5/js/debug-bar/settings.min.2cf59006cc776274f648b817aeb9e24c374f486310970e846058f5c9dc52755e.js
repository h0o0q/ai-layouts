class DebugBarSettings{constructor({storageKey:e="hugo.debug_bar_settings",barId:t="hdb"}={}){if(this.storageKey=e,this.debugBar=document.getElementById(t),!this.debugBar)return;this.settingsMap=[{inputId:"hdb-bg-color",key:"bg_color",css:"--hdb-bg-color"},{inputId:"hdb-bg-color-inner",key:"bg_color_inner",css:"--hdb-bg-color-inner"},{inputId:"hdb-color",key:"color",css:"--hdb-color"},{inputId:"hdb-color-hover",key:"color_hover",css:"--hdb-color-hover"},{inputId:"hdb-color-current-menu",key:"color_current_menu",css:"--hdb-color-current-menu"},{inputId:"hdb-color-print-value",key:"color_print_value",css:"--hdb-color-print-value"},{inputId:"hdb-color-print-bool-true",key:"color_print_bool_true",css:"--hdb-color-print-bool-true"},{inputId:"hdb-color-print-bool-false",key:"color_print_bool_false",css:"--hdb-color-print-bool-false"},{inputId:"hdb-border-color",key:"border_color",css:"--hdb-border-color"},{inputId:"hdb-border-color-table",key:"border_color_table",css:"--hdb-border-color-table"}],this.inputs={},this.settingsMap.forEach(({inputId:e})=>{this.inputs[e]=document.getElementById(e)}),this.form=document.getElementById("hdb-settings-form"),this.setDefaultValues(),this.initialize()}initialize(){const e=this.getStoredSettings();this.applySettings(e),this.bindEvents()}handleSettingChange(e,t){e.preventDefault();const n=this.getStoredSettings();n[t.key]=String(e.target.value),this.setStoredSettings(n),this.debugBar.style.setProperty(t.css,e.target.value)}handleReset(e){e.preventDefault(),this.safeRemove(this.storageKey),e.target.submit()}bindEvents(){this.settingsMap.forEach(e=>{const t=this.inputs[e.inputId];t&&t.addEventListener("input",t=>this.handleSettingChange(t,e))}),this.form&&this.form.addEventListener("submit",this.handleReset.bind(this))}safeGet(e){try{return localStorage.getItem(e)}catch{return console.error("Error getting key",e),null}}safeSet(e,t){try{localStorage.setItem(e,t)}catch{console.error("Error setting key",e)}}safeRemove(e){try{localStorage.removeItem(e)}catch{console.error("Error removing key",e)}}getStoredSettings(){const e=this.safeGet(this.storageKey);if(e===null)return{};try{return JSON.parse(e)}catch{return console.error("Error parsing stored object settings"),{}}}setStoredSettings(e){this.safeSet(this.storageKey,JSON.stringify(e))}setDefaultValues(){const e=getComputedStyle(this.debugBar);this.defaults={},this.settingsMap.forEach(({key:t,css:n,inputId:s})=>{const o=e.getPropertyValue(n).trim();this.defaults[t]=o;const i=this.inputs[s];i&&(i.value=o)})}applySettings(e){this.settingsMap.forEach(({key:t,css:n,inputId:s})=>{const o=e&&e[t]?e[t]:this.defaults[t];this.debugBar.style.setProperty(n,o);const i=this.inputs[s];i&&(i.value=o.trim())})}}document.addEventListener("DOMContentLoaded",()=>new DebugBarSettings)