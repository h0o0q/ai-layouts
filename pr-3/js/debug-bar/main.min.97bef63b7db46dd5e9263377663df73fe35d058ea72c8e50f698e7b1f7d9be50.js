class DebugBar{constructor({storageKey:e="hugo.debug_bar",toggleId:t="hdb-toggle",barId:n="hdb"}={}){if(this.storageKey=e,this.toggle=document.getElementById(t),this.debugBar=document.getElementById(n),this.detailsList=document.querySelectorAll("details"),!this.debugBar)return;this.initialize()}initialize(){const e=this.getStoredVisibility();this.setVisibility(e),this.bindEvents()}bindEvents(){this.toggle&&this.toggle.addEventListener("click",this.handleToggleClick.bind(this)),this.detailsList.forEach(e=>{e.addEventListener("toggle",this.handleDetailsToggle.bind(this))})}safeGet(e){try{return localStorage.getItem(e)}catch{return null}}safeSet(e,t){try{localStorage.setItem(e,t)}catch{}}getStoredVisibility(){const e=this.safeGet(this.storageKey);if(e===null)return!0;try{return JSON.parse(e)}catch{return!0}}setStoredVisibility(e){this.safeSet(this.storageKey,JSON.stringify(e))}setVisibility(e){e?this.show():this.hide()}show(){const e=getComputedStyle(this.debugBar);this.debugBar.style.display="",this.debugBar.style.opacity=1}hide(){this.debugBar.style.opacity=0,setTimeout(()=>{this.debugBar.style.display="none"},300)}setAria(e,t){e&&e.setAttribute("aria-expanded",String(t))}handleToggleClick(e){e.preventDefault();const t=!this.getStoredVisibility();this.setStoredVisibility(t),this.setVisibility(t),this.setAria(this.toggle,t)}handleDetailsToggle(e){const t=e.target;if(!t.open){this.setAria(t.querySelector("summary"),!1);return}this.detailsList.forEach(e=>{const n=e===t;e.open=n,this.setAria(e.querySelector("summary"),n)})}}document.addEventListener("DOMContentLoaded",()=>new DebugBar)